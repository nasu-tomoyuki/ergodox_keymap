# My Keymap for ErgoDox EZ

## コンセプト

このキーマップのコンセプトは以下の通りです。

* Mac の US キーボードに対して違和感のない配列
 * 通常のキーボードと同じ側の手に配置する
 * 効率を上げることよりも通常のキーボードと併用できることを優先
* Layer0 (default) は主に入力用
* Layer1 は主にファンクションキーと移動用
* 親指でレイヤーキーを押している間だけ切り替える
 * つまり <kbd><kbd>Fn</kbd> + <kbd>Any</kbd></kbd> のような感覚
 * 基本的には常に Layer0 にいるので現在のレイヤーを意識する必要がない
* 左右の Gui キーによる日本語入力の切り替え
 * [Karabiner](https://pqrs.org/osx/karabiner/index.html.ja) などでよくやっているアレ


## 特徴

* マウスキーのカーソルとホイールを長押しで加速させています。
* LED がピカピカします。
 * R:マウスの加速度、G:キー入力、B:モディファイア、を表します。


## レイアウト

```
/* Keymap 0: Basic layer
 *
 * ,--------------------------------------------------.           ,--------------------------------------------------.
 * | Esc~   |   1  |   2  |   3  |   4  |   5  |   6  |           |   6  |   7  |   8  |   9  |   0  |   -  |    =   |
 * |--------+------+------+------+------+------+------|           |------+------+------+------+------+------+--------|
 * | Tab    |   Q  |   W  |   E  |   R  |   T  |      |           |      |   Y  |   U  |   I  |   O  |   P  |   BS   |
 * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
 * |Esc/LCtl|A/LCtl|   S  |   D  |   F  |   G  |------|           |------|   H  |   J  |   K  |   L  |;/RCtl|    '   |
 * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
 * |LSft/Cps|   Z  |   X  |   C  |   V  |   B  |      |           |      |   N  |   M  |   ,  |   .  |   /  |    \   |
 * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
 *   |      |      |      |      | LSft |                                       | RSft |   [  |   ]  |      |      |
 *   `----------------------------------'                                       `----------------------------------'
 *                                        ,-------------.       ,-------------.
 *                                        | ~LSys|      |       |      |      |
 *                                 ,------|------+------|       |------+------+------.
 *                                 |      |      |      |       |      |      |      |
 *                                 | Space| LGui |------|       |------| RGui | Enter|
 *                                 |/~LNav| /英数| LAlt |       | RAlt | /かな|/~LNav|
 *                                 `--------------------'       `--------------------'
 */
```

* <kbd>LShift</kbd> をタップで <kbd>LShift</kbd>、ダブルタップで <kbd>Caps Lock</kbd> 。
* 左右小指位置を長押しで <kbd>Ctrl</kbd> になります。
* 右手側の数字キーがずれているように見えますが、通常のキーボードと物理的な配置は近いです。H の上が 7、J の上が 8 など。
* Gui のタップで <kbd>かな</kbd>/</kbd>英数</kbd> です。
* 省スペース化のためとレイアウトを崩さないように、左上のキーに <kbd>Esc</kbd> <kbd>~</kbd> <kbd>\`</kbd> をまとめています。修飾キーとの組み合わせで以下のようになります。

| 通常 | <kbd>Shift</kbd> | <kbd>~L1</kbd> |
|:-:|:-:|:-:|
| <kbd>Esc</kbd> | <kbd>~</kbd> | <kbd>\`</kbd> |


```
/* Keymap 1: Navigation Layer
 *
 * ,--------------------------------------------------.           ,--------------------------------------------------.
 * |    `   |  F1  |  F2  |  F3  |  F4  |  F5  |  F6  |           |  F6  |  F7  |  F8  |  F9  |  F10 |  F11 |   F12  |
 * |--------+------+------+------+------+------+------|           |------+------+------+------+------+------+--------|
 * |        |      |      |  MsU |      |      |      |           | Home | PgUp | PgDn |   [  |   ]  |      |   Del  |
 * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
 * |        | BtnL |  MsL |  MsD |  MsR | BtnR |------|           |------| Left | Down |  Up  | Right|      |        |
 * |--------+------+------+------+------+------|      |           |  End |------+------+------+------+------+--------|
 * |        |  WhD |  WhU |  WhR |  WhL |      |      |           |      |      |      |      |      |      |        |
 * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
 *   |      |      |      |      |      |                                       |      |      |      |      |      |
 *   `----------------------------------'                                       `----------------------------------'
 *                                        ,-------------.       ,-------------.
 *                                        |      |      |       |      |      |
 *                                 ,------|------+------|       |------+------+------.
 *                                 |      |      |      |       |      |      |      |
 *                                 |      |      |------|       |------|      |      |
 *                                 |      |      |      |       |      |      |      |
 *                                 `--------------------'       `--------------------'
 */
```

* 方向キーは Vim 仕様です。


```
/* Keymap 2: System Layer
 *
 * ,--------------------------------------------------.           ,--------------------------------------------------.
 * | Version|      |      |      |      |      |      |           |      |      |      |      |      |      |        |
 * |--------+------+------+------+------+------+------|           |------+------+------+------+------+------+--------|
 * |        |      |      |      |      |      |      |           |      |      |      |      |      |      |        |
 * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
 * |        |      |      |      |      |      |------|           |------|      |      |      |      |      |        |
 * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
 * |        |      |      |      |      |      |      |           |      |      |      |      |      |      |        |
 * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
 *   | Reset|      |      |      |      |                                       |      |      |      |      |      |
 *   `----------------------------------'                                       `----------------------------------'
 *                                        ,-------------.       ,-------------.
 *                                        |      |      |       |      |      |
 *                                 ,------|------+------|       |------+------+------.
 *                                 |      |      |      |       |      |      |      |
 *                                 |      |      |------|       |------|      |      |
 *                                 |      |      |      |       |      |      |      |
 *                                 `--------------------'       `--------------------'
 */
```

* Reset はファームウェアの書き換え用です。


## 準備

1. 当リポジトリを git clone する
1. [qmk_firmware](https://github.com/qmk/qmk_firmware) を git clone する
1. クローンした qmk_firmware にシンボリックリンクを置く
 * >$ ln -s /path/to/ergodox_keymap/ /path/to/qmk_firmware/keyboards/ergodox/keymaps/my_keymap
 * パスはクローン先に合わせて適宜書き換えてください
 * リポジトリの更新を考えなければ実体を置いてもいいと思います
 * docker を使う場合も実体をおいたほうが楽だと思います
1. ビルド環境を構築
 * 参考: [ErgoDox EZのキーマップを変更する](http://qiita.com/ReSTARTR/items/f84f8f3c4c51c876cb2f)


## ビルド

```
$ cd qmk_firmware
$ make TAP_DANCE_ENABLE=yes ergodox-ez-my_keymap
```

docker でビルドする場合は以下のようにします。パスは環境に応じて変更してください。

```
$ cd qmk_firmware
$ docker run -e keyboard=ergodox -e subproject=ez -e keymap=my_keymap --rm -v $('pwd'):/qmk:rw jackhumbert/qmk_firmware make TAP_DANCE_ENABLE=yes
```

これで ergodox_ez_my_keymap.hex が出来上がります。


## 開発環境

* Macbook Air
 * OS X El Capitan
* ErgoDox EZ
 * Snow





